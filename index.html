<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>北京奥运城市发展促进会 - 2022新年贺卡</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=0, maximum-scale=1, minimum-scale=1">

        <link rel="stylesheet" href="css/normalize.css">
        <link rel="stylesheet" href="css/main.css">
        <link rel="stylesheet" href="css/app.css">

        <script src="libs/modernizr-2.8.3.min.js"></script>
        <script src="libs/jquery-1.12.0.min.js"></script>
    </head>
    <body>

    <div class="app-body">
        <div id="musicSwitch" class="m-btn"></div>
        <div class="ele snow-big" style="width: 70px; left: 10px; top: 150px;"><img src="img/001.png" /></div>
        <div class="ele intro" style="width: 220px; left: 10px; top: 0px;"><img src="img/005.png" /></div>
        <div class="ele intro" style="width: 235px; left: 30px; top: 60px;"><img src="img/006.png" /></div>
        <div class="ele intro" style="width: 120px; left: 35px; top: 150px;"><img id="word" src="img/003.png" /></div>
        <!---->
        <div class="ele rotate1" style="width: 80px; left: 250px; top: -30px;"><img src="img/001.png" /></div>
        <div class="ele rotate2" style="width: 100px; left: 270px; top: 70px;"><img src="img/001.png" /></div>
        <div class="ele snow-big" style="width: 40px; left: 110px; top: 40px;"><img src="img/001.png" /></div>
        <div class="ele snow-big" style="width: 50px; left: 20px; top: 240px;"><img src="img/001.png" /></div>
        <div class="ele rotate1" style="width: 100px; left: 40px; top: 300px;"><img src="img/001.png" /></div>
        <div class="ele snow-big" style="width: 30px; left: -10px; top: 90px;"><img src="img/001.png" /></div>
        <div class="ele snow-big" style="width: 30px; left: 150px; top: 200px;"><img src="img/001.png" /></div>
        <!---->
        <div class="ele fill" style="width: 340px; left: 100px; top: 180px;"><img src="img/015.png" /></div>
        <div class="ele ski" style="width: 110px; left: 150px; top: 60px;"><img src="img/002.png" /></div>
        <div class="ele" style="width: 400px; left: -10px; top: 490px;"><img src="img/011.png" /></div>
        <div class="ele slide" style="width: 300px; left: -30px; top: 430px;"><img src="img/012.png" /></div>
        <div class="ele slide" style="width: 60px; left: 30px; top: 400px;"><img src="img/008.png" /></div>
        <div class="ele slide" style="width: 100px; left: 20px; top: 540px;"><img src="img/004.png" /></div>
        <div class="ele slide" style="width: 70px; left: -40px; top: 490px;"><img src="img/010.png" /></div>
        <div class="ele slide" style="width: 50px; left: 40px; top: 460px;"><img src="img/010.png" /></div>
        <div class="ele slide" style="width: 240px; left: 150px; top: 480px;"><img src="img/014.png" /></div>
        <div class="ele swing" style="width: 230px; left: 140px; top: 200px;"><img src="img/009.png" /></div>
    </div>
    <audio id="m" autoplay="autoplay" loop="loop" src="bg1.mp3"></audio>

    <script>
        //
        var media = document.getElementById("m");
        document.addEventListener('WeixinJSBridgeReady', function(){media.play()});
        //
        $(function () {
            //
            for (var i=0; i<30; i++) {
                setTimeout(createSnow, Math.round(Math.random()*8000)+1000);
            }
            //
            $("#word").prop('src', location.hash=='#spring'? 'img/003a.png':'img/003.png');
            $(".star").each(function () {$(this).addClass(Math.round(Math.random())? 'rotate1':'rotate2')});
            $(".intro").each(function (i) {$(this).css('animation-delay', i*600 +'ms')});
            $(".slide").each(function (i) {$(this).css('animation-delay', i*100+2000 +'ms')});
            $(".snow-big").each(function () {$(this).css('animation-delay', Math.round(Math.random()*5000)+'ms')});
            //
            $("#musicSwitch").click(function () {
                $(this).toggleClass("m-motion");
                if (media.paused) media.play();
                else media.pause();
            });
            //
            $(window).resize(function () {
                var ww = $(this).width(), wh = $(this).height();
                var pw = $('.app-body').width(), ph = $('.app-body').height();
                var flip = wh < ww && false;
                var deg = flip? '90deg':'0';
                var ratio = flip? Math.min(ww/ph, wh/pw):Math.min(ww/pw, wh/ph);
                $('.app-body').css({
                    top: Math.round((wh-ph)/2),
                    left: Math.round((ww-pw)/2),
                    transform: 'rotate('+deg+') scale('+ratio+')'
                });
            }).resize();
        });
        //
        function createSnow() {
            var star = $('<div class="snow"></div>');
            var x = Math.round(Math.random()*($(window).width()-100))+50;
            var y = Math.round(Math.random()*($(window).height()-100))+50;
            star.width(30).height(30).css({left: x, top: y}).appendTo(".app-body");
            setTimeout(function () {
                star.remove();
                createSnow();
            }, 5000);
        }
    </script>
    </body>
</html>
